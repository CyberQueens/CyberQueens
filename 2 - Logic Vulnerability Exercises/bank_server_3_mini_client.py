"""
Guy Levin 2019 (c) All Rights Reserved

Code used for simple manual communication with bank server
"""
import sys
if sys.version_info[0] < 3:
    raise Exception("Python 3 or a more recent version is required. Download Python 3 from https://www.python.org/downloads/")

import socket
TARGET_CONNECTION = ("127.0.0.1", 1338)

def talk_with_bank_server():
	s = socket.socket() # use default options: ipv4+TCP
	s.connect(TARGET_CONNECTION)

	print("Use Control-C to exit")

	try:
		while True:
			data = input("send to server: ")
			if not data:
				continue
			if data[-1] != "\n": # for portability on Linux + Windows
				data += "\n"
			s.sendall(data.encode())
			response = s.recv(0x1000)
			print("response:")
			print(response.decode("ascii"))
	except KeyboardInterrupt as e:
		s.close()
		print("<connection closed>")

def main():
	talk_with_bank_server()

if __name__ == '__main__':
	main()